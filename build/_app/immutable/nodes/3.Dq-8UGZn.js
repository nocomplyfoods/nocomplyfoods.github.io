import{s as pe,k as ve,r as me,o as ge,n as be}from"../chunks/scheduler.BDfStAzi.js";import{S as Ce,i as Ee,c as je,s as I,h as T,a as Te,b as L,k,l as D,A as V,f as b,q as w,B as q,m as ke,d as B,o as j,C as te,D as J,t as we,e as ye,g as Ne,v as Y,j as K,n as X,E as ne,p as $,F as De,x as Oe}from"../chunks/index.Dne1u5_X.js";import{M as Ae,e as U}from"../chunks/Meta.F2AgGZzP.js";import"../chunks/transform.W7TN51b0.js";function le(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}var oe={},Q={},W=34,P=10,G=13;function de(n){return new Function("d","return {"+n.map(function(e,l){return JSON.stringify(e)+": d["+l+'] || ""'}).join(",")+"}")}function Se(n,e){var l=de(n);return function(t,o){return e(l(t),o,n)}}function re(n){var e=Object.create(null),l=[];return n.forEach(function(t){for(var o in t)o in e||l.push(e[o]=o)}),l}function y(n,e){var l=n+"",t=l.length;return t<e?new Array(e-t+1).join(0)+l:l}function ze(n){return n<0?"-"+y(-n,6):n>9999?"+"+y(n,6):y(n,4)}function Re(n){var e=n.getUTCHours(),l=n.getUTCMinutes(),t=n.getUTCSeconds(),o=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":ze(n.getUTCFullYear())+"-"+y(n.getUTCMonth()+1,2)+"-"+y(n.getUTCDate(),2)+(o?"T"+y(e,2)+":"+y(l,2)+":"+y(t,2)+"."+y(o,3)+"Z":t?"T"+y(e,2)+":"+y(l,2)+":"+y(t,2)+"Z":l||e?"T"+y(e,2)+":"+y(l,2)+"Z":"")}function Ue(n){var e=new RegExp('["'+n+`
\r]`),l=n.charCodeAt(0);function t(c,r){var v,p,i=o(c,function(N,C){if(v)return v(N,C-1);p=N,v=r?Se(N,r):de(N)});return i.columns=p||[],i}function o(c,r){var v=[],p=c.length,i=0,N=0,C,O=p<=0,z=!1;c.charCodeAt(p-1)===P&&--p,c.charCodeAt(p-1)===G&&--p;function H(){if(O)return Q;if(z)return z=!1,oe;var m,M=i,R;if(c.charCodeAt(M)===W){for(;i++<p&&c.charCodeAt(i)!==W||c.charCodeAt(++i)===W;);return(m=i)>=p?O=!0:(R=c.charCodeAt(i++))===P?z=!0:R===G&&(z=!0,c.charCodeAt(i)===P&&++i),c.slice(M+1,m-1).replace(/""/g,'"')}for(;i<p;){if((R=c.charCodeAt(m=i++))===P)z=!0;else if(R===G)z=!0,c.charCodeAt(i)===P&&++i;else if(R!==l)continue;return c.slice(M,m)}return O=!0,c.slice(M,p)}for(;(C=H())!==Q;){for(var A=[];C!==oe&&C!==Q;)A.push(C),C=H();r&&(A=r(A,N++))==null||v.push(A)}return v}function s(c,r){return c.map(function(v){return r.map(function(p){return f(v[p])}).join(n)})}function _(c,r){return r==null&&(r=re(c)),[r.map(f).join(n)].concat(s(c,r)).join(`
`)}function a(c,r){return r==null&&(r=re(c)),s(c,r).join(`
`)}function d(c){return c.map(h).join(`
`)}function h(c){return c.map(f).join(n)}function f(c){return c==null?"":c instanceof Date?Re(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:t,parseRows:o,format:_,formatBody:a,formatRows:d,formatRow:h,formatValue:f}}var Be=Ue(","),Me=Be.parse;async function Fe(n){let e,l;try{e=await(await fetch(`https://data.nocomplyfoods.com/archive/index.json?version=${Date.now()}`)).json(),hasData||(l="no data")}catch(t){l=t==null?void 0:t.message}finally{return{data:e,error:l}}}async function Ie(n){const l=await(await fetch(n)).text();return Me(l)}function se(n,e,l){const t=n.slice();return t[12]=e[l],t}function ae(n,e,l){const t=n.slice();return t[15]=e[l],t}function ce(n,e,l){const t=n.slice();return t[18]=e[l],t}function ie(n,e,l){const t=n.slice();t[21]=e[l];const o=t[21].replace(`archive/${t[0]}/`,"").replace(".csv","");return t[22]=o,t}function fe(n){let e,l=n[22]+"",t,o;return{c(){e=T("option"),t=K(l),this.h()},l(s){e=k(s,"OPTION",{});var _=D(e);t=X(_,l),_.forEach(b),this.h()},h(){e.__value=o=n[21],ne(e,e.__value)},m(s,_){B(s,e,_),j(e,t)},p(s,_){_&9&&l!==(l=s[22]+"")&&$(t,l),_&8&&o!==(o=s[21])&&(e.__value=o,ne(e,e.__value))},d(s){s&&b(e)}}}function Le(n){let e,l="Loading archival menus...";return{c(){e=T("p"),e.textContent=l,this.h()},l(t){e=k(t,"P",{style:!0,"data-svelte-h":!0}),V(e)!=="svelte-cqqiz7"&&(e.textContent=l),this.h()},h(){Oe(e,"text-align","center")},m(t,o){B(t,e,o)},p:be,d(t){t&&b(e)}}}function qe(n){let e,l,t,o,s,_=U(Object.keys(n[2][0])),a=[];for(let f=0;f<_.length;f+=1)a[f]=ue(ce(n,_,f));let d=U(n[2]),h=[];for(let f=0;f<d.length;f+=1)h[f]=_e(se(n,d,f));return{c(){e=T("table"),l=T("thead"),t=T("tr");for(let f=0;f<a.length;f+=1)a[f].c();o=I(),s=T("tbody");for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){e=k(f,"TABLE",{class:!0});var c=D(e);l=k(c,"THEAD",{});var r=D(l);t=k(r,"TR",{class:!0});var v=D(t);for(let i=0;i<a.length;i+=1)a[i].l(v);v.forEach(b),r.forEach(b),o=L(c),s=k(c,"TBODY",{});var p=D(s);for(let i=0;i<h.length;i+=1)h[i].l(p);p.forEach(b),c.forEach(b),this.h()},h(){w(t,"class","svelte-zhf3jp"),w(e,"class","svelte-zhf3jp")},m(f,c){B(f,e,c),j(e,l),j(l,t);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(t,null);j(e,o),j(e,s);for(let r=0;r<h.length;r+=1)h[r]&&h[r].m(s,null)},p(f,c){if(c&4){_=U(Object.keys(f[2][0]));let r;for(r=0;r<_.length;r+=1){const v=ce(f,_,r);a[r]?a[r].p(v,c):(a[r]=ue(v),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=_.length}if(c&4){d=U(f[2]);let r;for(r=0;r<d.length;r+=1){const v=se(f,d,r);h[r]?h[r].p(v,c):(h[r]=_e(v),h[r].c(),h[r].m(s,null))}for(;r<h.length;r+=1)h[r].d(1);h.length=d.length}},d(f){f&&b(e),Y(a,f),Y(h,f)}}}function ue(n){let e,l=n[18]+"",t;return{c(){e=T("th"),t=K(l),this.h()},l(o){e=k(o,"TH",{class:!0});var s=D(e);t=X(s,l),s.forEach(b),this.h()},h(){w(e,"class","svelte-zhf3jp")},m(o,s){B(o,e,s),j(e,t)},p(o,s){s&4&&l!==(l=o[18]+"")&&$(t,l)},d(o){o&&b(e)}}}function he(n){let e,l=n[15]+"",t;return{c(){e=T("td"),t=K(l),this.h()},l(o){e=k(o,"TD",{class:!0});var s=D(e);t=X(s,l),s.forEach(b),this.h()},h(){w(e,"class","svelte-zhf3jp")},m(o,s){B(o,e,s),j(e,t)},p(o,s){s&4&&l!==(l=o[15]+"")&&$(t,l)},d(o){o&&b(e)}}}function _e(n){let e,l,t=U(Object.values(n[12])),o=[];for(let s=0;s<t.length;s+=1)o[s]=he(ae(n,t,s));return{c(){e=T("tr");for(let s=0;s<o.length;s+=1)o[s].c();l=I(),this.h()},l(s){e=k(s,"TR",{class:!0});var _=D(e);for(let a=0;a<o.length;a+=1)o[a].l(_);l=L(_),_.forEach(b),this.h()},h(){w(e,"class","svelte-zhf3jp")},m(s,_){B(s,e,_);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);j(e,l)},p(s,_){if(_&4){t=U(Object.values(s[12]));let a;for(a=0;a<t.length;a+=1){const d=ae(s,t,a);o[a]?o[a].p(d,_):(o[a]=he(d),o[a].c(),o[a].m(e,l))}for(;a<o.length;a+=1)o[a].d(1);o.length=t.length}},d(s){s&&b(e),Y(o,s)}}}function He(n){let e,l,t,o,s="No Comply Foods Archive",_,a,d,h,f="Brunch",c,r,v="Dinner",p,i,N,C,O,z,H;e=new Ae({props:{preloadFont:n[4],hide:!0}});let A=U(n[3]),m=[];for(let u=0;u<A.length;u+=1)m[u]=fe(ie(n,A,u));function M(u,E){return u[2].length?qe:Le}let R=M(n),S=R(n);return{c(){je(e.$$.fragment),l=I(),t=T("div"),o=T("h1"),o.textContent=s,_=I(),a=T("section"),d=T("div"),h=T("button"),h.textContent=f,c=I(),r=T("button"),r.textContent=v,p=I(),i=T("select");for(let u=0;u<m.length;u+=1)m[u].c();N=I(),C=T("section"),S.c(),this.h()},l(u){Te(e.$$.fragment,u),l=L(u),t=k(u,"DIV",{class:!0});var E=D(t);o=k(E,"H1",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-izxn1w"&&(o.textContent=s),_=L(E),a=k(E,"SECTION",{id:!0,class:!0});var g=D(a);d=k(g,"DIV",{class:!0});var F=D(d);h=k(F,"BUTTON",{class:!0,"data-svelte-h":!0}),V(h)!=="svelte-1wb50su"&&(h.textContent=f),c=L(F),r=k(F,"BUTTON",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-1ycds4y"&&(r.textContent=v),F.forEach(b),p=L(g),i=k(g,"SELECT",{class:!0});var x=D(i);for(let Z=0;Z<m.length;Z+=1)m[Z].l(x);x.forEach(b),g.forEach(b),N=L(E),C=k(E,"SECTION",{id:!0,class:!0});var ee=D(C);S.l(ee),ee.forEach(b),E.forEach(b),this.h()},h(){w(o,"class","svelte-zhf3jp"),w(h,"class","svelte-zhf3jp"),q(h,"active",n[0]==="brunch"),w(r,"class","svelte-zhf3jp"),q(r,"active",n[0]==="dinner"),w(d,"class","service-selector"),w(i,"class","svelte-zhf3jp"),n[1]===void 0&&ve(()=>n[10].call(i)),w(a,"id","ui"),w(a,"class","svelte-zhf3jp"),q(a,"visible",n[2].length),w(C,"id","menu"),w(C,"class","svelte-zhf3jp"),w(t,"class","c")},m(u,E){ke(e,u,E),B(u,l,E),B(u,t,E),j(t,o),j(t,_),j(t,a),j(a,d),j(d,h),j(d,c),j(d,r),j(a,p),j(a,i);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(i,null);te(i,n[1],!0),j(t,N),j(t,C),S.m(C,null),O=!0,z||(H=[J(h,"click",n[8]),J(r,"click",n[9]),J(i,"change",n[10])],z=!0)},p(u,[E]){if((!O||E&1)&&q(h,"active",u[0]==="brunch"),(!O||E&1)&&q(r,"active",u[0]==="dinner"),E&9){A=U(u[3]);let g;for(g=0;g<A.length;g+=1){const F=ie(u,A,g);m[g]?m[g].p(F,E):(m[g]=fe(F),m[g].c(),m[g].m(i,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=A.length}E&10&&te(i,u[1]),(!O||E&4)&&q(a,"visible",u[2].length),R===(R=M(u))&&S?S.p(u,E):(S.d(1),S=R(u),S&&(S.c(),S.m(C,null)))},i(u){O||(we(e.$$.fragment,u),O=!0)},o(u){ye(e.$$.fragment,u),O=!1},d(u){u&&(b(l),b(t)),Ne(e,u),Y(m,u),S.d(),z=!1,me(H)}}}function Pe(n,e,l){let t,o=[],s=[],_=[],a="brunch",d;const h=["../assets/fonts/LondrinaSolid-Black.woff2","../assets/fonts/SometypeMono-Medium.woff2","../assets/fonts/SometypeMono-Bold.woff2"];async function f(){const i=`https://data.nocomplyfoods.com/${d}`,N=await Ie(i);N.forEach(C=>{delete C.type,delete C.service}),l(2,_=[...N])}function c(i){l(0,a=i),i==="brunch"&&o.length>0?l(1,d=o[0]):i==="dinner"&&s.length>0&&l(1,d=s[0])}ge(async()=>{try{const{data:i}=await Fe();if(i)l(6,o=i.brunch),l(7,s=i.dinner),o.sort(le),s.sort(le),c("brunch");else throw new Error("No data loaded from archive.")}catch(i){console.error("Failed to load archive:",i)}});const r=()=>c("brunch"),v=()=>c("dinner");function p(){d=De(this),l(1,d),l(3,t),l(0,a),l(6,o),l(7,s)}return n.$$.update=()=>{n.$$.dirty&193&&l(3,t=a==="brunch"?o:s),n.$$.dirty&2&&d&&f()},[a,d,_,t,h,c,o,s,r,v,p]}class Qe extends Ce{constructor(e){super(),Ee(this,e,Pe,He,pe,{})}}export{Qe as component};
