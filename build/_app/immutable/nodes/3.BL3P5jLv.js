import{s as A,n as H,x as le,o as ie}from"../chunks/scheduler.75qX3gQ8.js";import{S as B,i as W,e as E,c as w,a as P,d as o,o as S,z as j,f as I,A as ee,t as q,h as k,H as se,b as M,k as V,B as te,g as p,s as C,p as K,n as T,l as $,m as ae,u as L,v as Q,w as R,x as U,q as ne}from"../chunks/index.ChFLCBIJ.js";import{e as N}from"../chunks/each.D6YF6ztN.js";import{p as re}from"../chunks/stores.5hhKj5ub.js";function X(r,s,i){const e=r.slice();return e[2]=s[i].item,e[3]=s[i].detail,e[4]=s[i].price,e}function Y(r){let s,i,e,t=r[2]+"",a,l,c,h,b=(r[3]||"&nbsp;")+"",D,g,m,f,_=r[4]+"",n,u;return{c(){s=E("div"),i=E("div"),e=E("p"),a=q(t),l=k(),c=E("p"),h=new se(!1),D=k(),g=E("div"),m=E("p"),f=q("$"),n=q(_),u=k(),this.h()},l(v){s=w(v,"DIV",{class:!0});var d=P(s);i=w(d,"DIV",{class:!0});var z=P(i);e=w(z,"P",{class:!0});var F=P(e);a=M(F,t),F.forEach(o),l=V(z),c=w(z,"P",{class:!0});var G=P(c);h=te(G,!1),G.forEach(o),z.forEach(o),D=V(d),g=w(d,"DIV",{class:!0});var J=P(g);m=w(J,"P",{class:!0});var O=P(m);f=M(O,"$"),n=M(O,_),O.forEach(o),J.forEach(o),u=V(d),d.forEach(o),this.h()},h(){S(e,"class","name svelte-e602mf"),h.a=null,S(c,"class","detail svelte-e602mf"),S(i,"class","text svelte-e602mf"),S(m,"class","price svelte-e602mf"),S(g,"class","amount"),S(s,"class","item svelte-e602mf")},m(v,d){I(v,s,d),p(s,i),p(i,e),p(e,a),p(i,l),p(i,c),h.m(b,c),p(s,D),p(s,g),p(g,m),p(m,f),p(m,n),p(s,u)},p(v,d){d&1&&t!==(t=v[2]+"")&&C(a,t),d&1&&b!==(b=(v[3]||"&nbsp;")+"")&&h.p(b),d&1&&_!==(_=v[4]+"")&&C(n,_)},d(v){v&&o(s)}}}function ce(r){let s,i=N(r[0]),e=[];for(let t=0;t<i.length;t+=1)e[t]=Y(X(r,i,t));return{c(){s=E("div");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){s=w(t,"DIV",{class:!0});var a=P(s);for(let l=0;l<e.length;l+=1)e[l].l(a);a.forEach(o),this.h()},h(){S(s,"class","items svelte-e602mf"),j(s,"split",r[1])},m(t,a){I(t,s,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(s,null)},p(t,[a]){if(a&1){i=N(t[0]);let l;for(l=0;l<i.length;l+=1){const c=X(t,i,l);e[l]?e[l].p(c,a):(e[l]=Y(c),e[l].c(),e[l].m(s,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=i.length}a&2&&j(s,"split",t[1])},i:H,o:H,d(t){t&&o(s),ee(e,t)}}}function oe(r,s,i){let{mains:e}=s,{split:t}=s;return r.$$set=a=>{"mains"in a&&i(0,e=a.mains),"split"in a&&i(1,t=a.split)},[e,t]}class fe extends B{constructor(s){super(),W(this,s,oe,ce,A,{mains:0,split:1})}}function Z(r,s,i){const e=r.slice();return e[3]=s[i].item,e[4]=s[i].price,e}function y(r){let s,i,e,t=r[3]+"",a,l,c,h,b,D=r[1]?"":`$${r[4]}`,g;return{c(){s=E("div"),i=E("div"),e=E("p"),a=q(t),l=k(),c=E("div"),h=E("p"),b=new se(!1),g=k(),this.h()},l(m){s=w(m,"DIV",{class:!0});var f=P(s);i=w(f,"DIV",{class:!0});var _=P(i);e=w(_,"P",{class:!0});var n=P(e);a=M(n,t),n.forEach(o),_.forEach(o),l=V(f),c=w(f,"DIV",{class:!0});var u=P(c);h=w(u,"P",{class:!0});var v=P(h);b=te(v,!1),v.forEach(o),u.forEach(o),g=V(f),f.forEach(o),this.h()},h(){S(e,"class","name svelte-1v8n0qz"),S(i,"class","text"),b.a=null,S(h,"class","price svelte-1v8n0qz"),S(c,"class","amount"),S(s,"class","item svelte-1v8n0qz")},m(m,f){I(m,s,f),p(s,i),p(i,e),p(e,a),p(s,l),p(s,c),p(c,h),b.m(D,h),p(s,g)},p(m,f){f&1&&t!==(t=m[3]+"")&&C(a,t),f&3&&D!==(D=m[1]?"":`$${m[4]}`)&&b.p(D)},d(m){m&&o(s)}}}function ue(r){let s,i=N(r[0]),e=[];for(let t=0;t<i.length;t+=1)e[t]=y(Z(r,i,t));return{c(){s=E("div");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){s=w(t,"DIV",{class:!0});var a=P(s);for(let l=0;l<e.length;l+=1)e[l].l(a);a.forEach(o),this.h()},h(){S(s,"class","items svelte-1v8n0qz"),j(s,"split",r[2])},m(t,a){I(t,s,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(s,null)},p(t,[a]){if(a&3){i=N(t[0]);let l;for(l=0;l<i.length;l+=1){const c=Z(t,i,l);e[l]?e[l].p(c,a):(e[l]=y(c),e[l].c(),e[l].m(s,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=i.length}a&4&&j(s,"split",t[2])},i:H,o:H,d(t){t&&o(s),ee(e,t)}}}function he(r,s,i){let{sides:e}=s,{sidesSamePrice:t}=s,{split:a}=s;return r.$$set=l=>{"sides"in l&&i(0,e=l.sides),"sidesSamePrice"in l&&i(1,t=l.sidesSamePrice),"split"in l&&i(2,a=l.split)},[e,t,a]}class me extends B{constructor(s){super(),W(this,s,he,ue,A,{sides:0,sidesSamePrice:1,split:2})}}function pe(r){const e=le(re).url.search.split("&").find(t=>t.includes(`${r}=`));if(e)return e.split("=")[1]}function x(r){let s,i,e,t,a,l,c,h,b,D=r[3]?` $${r[4]}`:"",g,m,f,_;return a=new fe({props:{mains:r[2],split:r[6]}}),f=new me({props:{sides:r[1],sidesSamePrice:r[3],split:r[6]}}),{c(){s=E("p"),i=q(r[5]),e=k(),t=E("section"),L(a.$$.fragment),l=k(),c=E("section"),h=E("p"),b=q("Sides"),g=q(D),m=k(),L(f.$$.fragment),this.h()},l(n){s=w(n,"P",{class:!0});var u=P(s);i=M(u,r[5]),u.forEach(o),e=V(n),t=w(n,"SECTION",{class:!0});var v=P(t);Q(a.$$.fragment,v),v.forEach(o),l=V(n),c=w(n,"SECTION",{class:!0});var d=P(c);h=w(d,"P",{class:!0});var z=P(h);b=M(z,"Sides"),g=M(z,D),z.forEach(o),m=V(d),Q(f.$$.fragment,d),d.forEach(o),this.h()},h(){S(s,"class","updated svelte-1zw04p"),S(t,"class","mains svelte-1zw04p"),S(h,"class","title svelte-1zw04p"),S(c,"class","sides svelte-1zw04p")},m(n,u){I(n,s,u),p(s,i),I(n,e,u),I(n,t,u),R(a,t,null),I(n,l,u),I(n,c,u),p(c,h),p(h,b),p(h,g),p(c,m),R(f,c,null),_=!0},p(n,u){(!_||u&32)&&C(i,n[5]);const v={};u&4&&(v.mains=n[2]),u&64&&(v.split=n[6]),a.$set(v),(!_||u&24)&&D!==(D=n[3]?` $${n[4]}`:"")&&C(g,D);const d={};u&2&&(d.sides=n[1]),u&8&&(d.sidesSamePrice=n[3]),u&64&&(d.split=n[6]),f.$set(d)},i(n){_||(T(a.$$.fragment,n),T(f.$$.fragment,n),_=!0)},o(n){$(a.$$.fragment,n),$(f.$$.fragment,n),_=!1},d(n){n&&(o(s),o(e),o(t),o(l),o(c)),U(a),U(f)}}}function de(r){let s,i,e=r[0]&&x(r);return{c(){s=E("div"),e&&e.c(),this.h()},l(t){s=w(t,"DIV",{style:!0,class:!0});var a=P(s);e&&e.l(a),a.forEach(o),this.h()},h(){K(s,"--side-width",r[7]),S(s,"class","svelte-1zw04p"),j(s,"split",r[6])},m(t,a){I(t,s,a),e&&e.m(s,null),i=!0},p(t,[a]){t[0]?e?(e.p(t,a),a&1&&T(e,1)):(e=x(t),e.c(),T(e,1),e.m(s,null)):e&&(ne(),$(e,1,1,()=>{e=null}),ae()),(!i||a&128)&&K(s,"--side-width",t[7]),(!i||a&64)&&j(s,"split",t[6])},i(t){i||(T(e),i=!0)},o(t){$(e),i=!1},d(t){t&&o(s),e&&e.d()}}}function _e(r,s,i){let e,t,a=[],l=[],c=!1,h,b,D;async function g(){try{const f=await(await fetch(`https://data.nocomplyfoods.com/menu.json?version=${Date.now()}`)).json(),_=f.items.filter(n=>n.price&&n.item);i(0,t=_.length>0),i(2,a=_.filter(n=>n.section==="main")),a.sort((n,u)=>u.price-n.price),i(1,l=_.filter(n=>n.section==="side")),i(4,h=l[0].price),i(3,c=l.every(n=>n.price===h)),i(5,b=f.updated)}catch(m){console.log(m)}finally{setTimeout(g,6e4)}}return ie(async()=>{i(6,D=pe("split")),await g()}),r.$$.update=()=>{r.$$.dirty&3&&i(7,e=t?`${Math.floor(1/Math.ceil(l.length/2)*100)}%`:"none")},[t,l,a,c,h,b,D,e]}class Pe extends B{constructor(s){super(),W(this,s,_e,de,A,{})}}export{Pe as component};
